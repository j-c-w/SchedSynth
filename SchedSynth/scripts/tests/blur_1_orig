produce consumer:
  for y:
    for x:
      consumer(...) = ...
