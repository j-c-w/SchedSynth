produce consumer:
  for x:
    store producer
    for y:
      produce producer:
        for a:
          for b:
            producer(...) = ...
      for z:
        consumer(...) = ...
